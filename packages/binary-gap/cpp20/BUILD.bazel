# Hey Emacs, this is -*- coding: utf-8; mode: bazel -*-

load("@rules_cc//cc:defs.bzl", "cc_binary", "cc_test")

cc_binary(
  name = "binary-gap-cpp20",
  srcs = [
    "src/binary_form.hpp",
    "src/main.cpp",
    "src/main.hpp",
  ],
  deps = [
    "@cpp-utils//:cpp-utils",
    "@range-v3//:range-v3",
    "@boost//:boost",
    "@system//:system",
  ],
  # linkopts = ['-Wl,-rpath,"$$ORIGIN/../lib"'],
  visibility = ["//visibility:public"],
)

cc_test(
  name = "binary-gap-cpp20-test",
  srcs = [
    "src/main.hpp",
    "src/main.test.cpp",
  ],
  deps = [
    "@cpp-utils//:cpp-utils",
    "@range-v3//:range-v3",
    "@boost//:boost",
    "@system//:system",
  ],
  # linkopts = ['-Wl,-rpath,"$$ORIGIN/../lib"'],
  visibility = ["//visibility:public"],
)

cc_binary(
  name = "binary-gap-cpp20-perf",
  srcs = [
    "src/binary_form.hpp",
    "src/main.hpp",
    "src/perf.cpp",
  ],
  deps = [
    "@cpp-utils//:cpp-utils",
    "@range-v3//:range-v3",
    "@boost//:boost",
    "@system//:system",
  ],
  # linkopts = ['-Wl,-rpath,"$$ORIGIN/../lib"'],
  visibility = ["//visibility:public"],
)
